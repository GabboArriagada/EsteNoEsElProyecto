<h1>Lista De usuarios</h1>

<table class="table table-bordered table-striped">
  <thead>
    <tr>
      <th>Apellido</th>
      <th>Nombre</th>
      <th>Rut</th>
      <th>Correo</th>
      <th>Roles</th>
      <th>asignar rol profesor</th>
      <th>asignar rol alumno</th>
      <th>asignar rol admin</th>
    </tr>
  </thead>

  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.last_name %></td>
        <td><%= user.name %></td>
        <td><%= user.rut %></td>
        <td><%= user.email %></td>
        <td><%= user.roles.pluck(:name).join(", ") %></td>
        <% if user.has_role? :profesor %>
          <td><%= link_to 'quitar rol', god_user_removeprofesor_path('user' => user.id),:method => "post" %></td>
        <% else %>
          <td><%= link_to 'asignar', god_user_toprofesor_path('user' => user.id),:method => "post" %></td>
        <% end %>
        <% if user.has_role? :alumno %>
          <td><%= link_to 'quitar rol', god_user_removealumno_path('user' => user.id),:method => "post" %></td>
        <% else %>
          <td><%= link_to 'asignar', god_user_toalumno_path('user' => user.id),:method => "post" %></td>
        <% end %>
        <% if user.has_role? :admin %>
          <td><%= link_to 'quitar rol', god_user_removeadmin_path('user' => user.id),:method => "post" %></td>
        <% else %>
          <td><%= link_to 'asignar', god_user_toadmin_path('user' => user.id),:method => "post"  %></td>
        <% end %>


      </tr>
    <% end %>
  </tbody>
</table>
